/*! Portal A 2018 - v3.0.0
 * https://portal-a.com
 * Copyright (c) 2018; * Licensed GPLv2+ */
Math.easeInOutQuad=function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)},window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)}),function(t){var e={};e.scrollTo=function(e,n,r){function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){c+=u,i(Math.easeInOutQuad(c,s,a,n)),c<n?l(o):r&&"function"==typeof r&&r()}var s=function(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}(),a=e-s,c=0,u=20,l=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)};n=void 0===n?500:n,o()},e.siblings=function(t,e){return Array.prototype.filter.call(t.parentNode.children,function(n){return n!==t&&(e?"."===e[0]?n.classList.contains(e.substr(1)):"#"===e[0]?n.getAttribute("id")===e.substr(1):n:n)})},t.UTIL=e}(this),function(t){var e=function(){this.scrollCallbacks=[],this.init()};e.prototype.init=function(){var e=this;this.isRedirect()&&this.handleRedirect(),t.history&&document.querySelector("[data-load-content]")&&(t.onpopstate=function(t){if(t.state){var n=t.state.type+"-"+t.state.id;e.handleRedirect("?pa_redirect_to="+n)}})},e.prototype.onScroll=function(t){"function"==typeof t&&this.scrollCallbacks.push(t)},e.prototype.isRedirect=function(){return location.search.indexOf("pa_redirect_to")>-1},e.prototype.parseQuery=function(t){var e=t.substr(1).split("&"),n={};return e.forEach(function(t){var e=t.split("=")[0],r=t.split("=")[1];n[e]=r}),n},e.prototype.handleRedirect=function(t){if(t=t||location.search,t=this.parseQuery(t),t.pa_redirect_to){var e=document.getElementById(t.pa_redirect_to);e&&(this.activateViewToggle(document.querySelector('.js-view-toggle[href="#'+e.getAttribute("id")+'"]')),this.activateView(e))}},e.prototype.activateView=function(e){function n(n){var r=Mustache.render(i,n);e.innerHTML=r,t.history&&history.pushState(n,"",n.link)}var r,i=e.querySelector('script[type="html/mustache-template"]'),o=parseInt(e.getAttribute("data-load-content")),s=e.getAttribute("data-view-top");if(e.style.display="block",UTIL.siblings(e,".js-view-target").forEach(function(t){t.style.display="none"}),r=e.offsetTop,s){var a=document.querySelector(s);r=a?a.offsetTop:r}UTIL.scrollTo(r),i&&(i=i.innerText,o&&(e.classList.add("is-loading"),fetch(PA.api+"pages/"+o).then(function(t){return t.json()}).then(function(t){targetLoaded=!0,e.classList.remove("is-loading"),UTIL.scrollTo(r),n(t)}).catch(function(t){console.log(t)})))},e.prototype.activateViewToggle=function(t,e){e=e||"is-active",t&&(t.classList.add(e),UTIL.siblings(t,".js-view-toggle").forEach(function(t){t.classList.remove(e)}))},t.APP=new e}(this),/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function n(t){return g(t)?"array":typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}function o(t,e){return v.call(t,e)}function s(t){return!o(y,t)}function a(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return m[t]})}function c(e,n){function i(t){if("string"==typeof t&&(t=t.split(b,2)),!g(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(r(t[0])+"\\s*"),a=new RegExp("\\s*"+r(t[1])),c=new RegExp("\\s*"+r("}"+t[1]))}if(!e)return[];var o,a,c,f=[],h=[],d=[],v=!1,y=!1;i(n||t.tags);for(var m,A,x,L,U,S,q=new p(e);!q.eos();){if(m=q.pos,x=q.scanUntil(o))for(var I=0,j=x.length;I<j;++I)L=x.charAt(I),s(L)?d.push(h.length):y=!0,h.push(["text",L,m,m+1]),m+=1,"\n"===L&&function(){if(v&&!y)for(;d.length;)delete h[d.pop()];else d=[];v=!1,y=!1}();if(!q.scan(o))break;if(v=!0,A=q.scan(k)||"name",q.scan(w),"="===A?(x=q.scanUntil(T),q.scan(T),q.scanUntil(a)):"{"===A?(x=q.scanUntil(c),q.scan(E),q.scanUntil(a),A="&"):x=q.scanUntil(a),!q.scan(a))throw new Error("Unclosed tag at "+q.pos);if(U=[A,x,m,q.pos],h.push(U),"#"===A||"^"===A)f.push(U);else if("/"===A){if(!(S=f.pop()))throw new Error('Unopened section "'+x+'" at '+m);if(S[1]!==x)throw new Error('Unclosed section "'+S[1]+'" at '+m)}else"name"===A||"{"===A||"&"===A?y=!0:"="===A&&i(x)}if(S=f.pop())throw new Error('Unclosed section "'+S[1]+'" at '+q.pos);return l(u(h))}function u(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}function l(t){for(var e,n,r=[],i=r,o=[],s=0,a=t.length;s<a;++s)switch(e=t[s],e[0]){case"#":case"^":i.push(e),o.push(e),i=e[4]=[];break;case"/":n=o.pop(),n[5]=e[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(e)}return r}function p(t){this.string=t,this.tail=t,this.pos=0}function f(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function h(){this.cache={}}var d=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===d.call(t)},v=RegExp.prototype.test,y=/\S/,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},w=/\s*/,b=/\s+/,T=/\s*=/,E=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;p.prototype.eos=function(){return""===this.tail},p.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},p.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},f.prototype.push=function(t){return new f(t,this)},f.prototype.lookup=function(t){var n,r=this.cache;if(r.hasOwnProperty(t))n=r[t];else{for(var o,s,a=this,c=!1;a;){if(t.indexOf(".")>0)for(n=a.view,o=t.split("."),s=0;null!=n&&s<o.length;)s===o.length-1&&(c=i(n,o[s])),n=n[o[s++]];else n=a.view[t],c=i(a.view,t);if(c)break;a=a.parent}r[t]=n}return e(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,n){var r=this.cache,i=r[e];return null==i&&(i=r[e+":"+(n||t.tags).join(":")]=c(e,n)),i},h.prototype.render=function(t,e,n){var r=this.parse(t),i=e instanceof f?e:new f(e);return this.renderTokens(r,i,n,t)},h.prototype.renderTokens=function(t,e,n,r){for(var i,o,s,a="",c=0,u=t.length;c<u;++c)s=void 0,i=t[c],o=i[0],"#"===o?s=this.renderSection(i,e,n,r):"^"===o?s=this.renderInverted(i,e,n,r):">"===o?s=this.renderPartial(i,e,n,r):"&"===o?s=this.unescapedValue(i,e):"name"===o?s=this.escapedValue(i,e):"text"===o&&(s=this.rawValue(i)),void 0!==s&&(a+=s);return a},h.prototype.renderSection=function(t,n,r,i){function o(t){return s.render(t,n,r)}var s=this,a="",c=n.lookup(t[1]);if(c){if(g(c))for(var u=0,l=c.length;u<l;++u)a+=this.renderTokens(t[4],n.push(c[u]),r,i);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)a+=this.renderTokens(t[4],n.push(c),r,i);else if(e(c)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(t[3],t[5]),o),null!=c&&(a+=c)}else a+=this.renderTokens(t[4],n,r,i);return a}},h.prototype.renderInverted=function(t,e,n,r){var i=e.lookup(t[1]);if(!i||g(i)&&0===i.length)return this.renderTokens(t[4],e,n,r)},h.prototype.renderPartial=function(t,n,r){if(r){var i=e(r)?r(t[1]):r[t[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},h.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},h.prototype.escapedValue=function(e,n){var r=n.lookup(e[1]);if(null!=r)return t.escape(r)},h.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var A=new h;return t.clearCache=function(){return A.clearCache()},t.parse=function(t,e){return A.parse(t,e)},t.render=function(t,e,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+n(t)+'" was given as the first argument for mustache#render(template, view, partials)');return A.render(t,e,r)},t.to_html=function(n,r,i,o){var s=t.render(n,r,i);if(!e(o))return s;o(s)},t.escape=a,t.Scanner=p,t.Context=f,t.Writer=h,t}),function(t){document.querySelectorAll(".js-smooth-scroll").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();var n=t.getAttribute("href")||t.getAttribute("data-target");n&&UTIL.scrollTo(document.querySelector(n).offsetTop)})})}(),function(t){var e=function(t){this.el=t,this.activeClass=t.getAttribute("data-active-class")||"is-active",this.target=t.getAttribute("href")||t.getAttribute("data-target"),this.targetEl=document.querySelector(this.target),this.targetEl&&this.init()};e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){var t=this;this.el.addEventListener("click",function(e){e.preventDefault(),APP.activateViewToggle(t.el,t.activeClass),APP.activateView(t.targetEl)})},document.querySelectorAll(".js-view-toggle").forEach(function(t){new e(t)})}();